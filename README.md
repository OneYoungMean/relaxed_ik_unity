# relaxed_ik_unity
Here is the project page that has more information about RelaxedIK that you may want to know about: https://uwgraphics.github.io/relaxed_ik_core/

This is the Unity wrapper of RelaxedIK designed to be run on Windows. Note that it probably wonâ€™t work on a linux machine. The simulation of a few commonly used robot arms have already been set up for you to play with. You will be able to disable and enable RelaxedIK as you like. When RelaxedIK is disabled, a joint angle writer panel will show up for you to modify the joint angle configuration. When RelaxedIK is enabled, you will be able to have real-time interactions with the robot and RelaxedIK by dragging the transform gizmo associated with the pose goal of the robot.

## Rust Dependencies (Not optional)
To use this wrapper, you will first need to install Rust. https://www.rust-lang.org/learn/get-started

If you plan to extend any of the Rust code, we recommend using the Jetbrains rust plugin.

## Install
1. Install Unity.
2. Clone this repo to your windows machine and open the subdirectory RelaxedIK as a Unity Project.
3. Initialize relaxed_ik_core (The core part of relaxed IK written in Rust) as a submodule by running the following command in the project directory: 
	```
	git submodule update --init
	```
   
## Run
1. Click play in Unity.
2. Hold left Alt key and use your mouse to navigate the camera.
3. Use the GUI at the left side to play with the robot arm.
4. Set a robot arm as active to play with it. Make sure only one robot arm is active at the same time.

## Steps of setting up a robot arm
1. If you would like to use your own config files for a robot that we provided config files in relaxed_ik_core/config or work on a new robot that we didn't provide config files, please go to [relaxed_ik](https://github.com/uwgraphics/relaxed_ik) to generate required config files. After you have those files, put the corresponding config files (generated by relaxed_ik) into each subfolder in relaxed_ik_core/config. Replace the given files if you are updating config files for a provided robot. You can skip this step if you would like to work on a robot whose config files are provided by us.
2. Follow the steps at [ros-sharp wiki](https://github.com/siemens/ros-sharp/wiki/User_App_NoROS_ImportURDFOnWindows) to set up the simulation of the robot arm in Unity. Please make sure that the urdf file has inertia information in it, otherwise the joints may not be set up correctly.
3. Once the robot arm is loaded, add the RelaxedIKUnity script in Assets/Scripts to it. Set up the list of robot Limbs and end effectors by adding the corresponding game object to the list. The size of this list should be the same as the size of joint angle solution array published by RelaxedIK for the corresponding robot. You can refer to the corresponding xxx_info.yaml for how many and the order of links to add to the list. Be careful that you only want to add those links with the Hinge Joint component which imply that they are associated with revolute joints. You also need to drag and drop the transform(s) of the end effector(s) and the pose goal prefab (which can be found at Assets/Prefabs/PoseGoal) to the Relaxed IK Unity component.
4. On the component of the UrdfRobot script, enable Is Kinematic and All Convex Colliders and disable Use Gravity and Use Inertia from URDF.
5. Optional: Add a child named `ViewCenter` tot the robot arm to configure the position of the camera at runtime.


## Known issues
1. The hubo robot doesn't work well because of its mismatching fixed frame.